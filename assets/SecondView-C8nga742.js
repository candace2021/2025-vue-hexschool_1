import{_ as C,r as k,c as b,a as l,b as I,w as u,v as r,t as n,F as T,o as y}from"./index-tFy4A4Tx.js";import{a as A}from"./index-NIGUFBhG.js";const z={class:"register"},S={action:""},_={class:"form-list"},B={class:"form-list"},D={class:"form-list"},F={class:"form-list"},L={key:0,class:"msg"},N={class:"signIn"},O={action:""},Z={class:"form-list"},$={class:"form-list"},j={key:0,class:"msg"},M={class:"verify"},P={action:""},R={class:"form-list"},q={key:0,class:"msg"},G="https://todolist-api.hexschool.io",H={__name:"SecondView",setup(J){const s=k({}),a=k({}),m=k(""),f=k(""),d=k(""),w=async(o,e,t,g,v,E={})=>{try{const p=await A[o](`${G+e}`,t,E);p.data.status&&(v==0?f.value=g+p.data.token:v==1?m.value=g:v==2&&(d.value=g)),s.value={},a.value={}}catch(p){v==0?f.value=p.response?.data?.message||"錯誤":v==1?m.value=p.response?.data?.message||"錯誤":v==2&&(d.value=p.response?.data?.message||"錯誤")}},c=()=>{m.value="",i.email(s.value.email),i.nickname(s.value.nickname),i.password(s.value.password),i.password2(s.value.password2);const o={email:s.value.email,password:s.value.password,nickname:s.value.nickname};Object.keys(a.value).length===0&&w("post","/users/sign_up",o,"註冊成功",1)},V=()=>{f.value="",i.email(s.value.emailIn,0),i.password(s.value.passwordIn,0);const o={email:s.value.emailIn,password:s.value.passwordIn};!a.value.emailIn&&!a.value.passwordIn&&w("post","/users/sign_in",o,"登入成功, Token= ",0)},U=()=>{d.value="",i.token(s.value.token)},x=()=>{d.value="",i.token(s.value.token,0)},i={email:(o,e=1)=>{o?/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(o).toLowerCase())?(delete a.value.email,delete a.value.emailIn):e?a.value.email="E-mail格式有誤":a.value.emailIn="E-mail格式有誤":e?a.value.email="此欄位不可為空值":a.value.emailIn="此欄位不可為空值"},nickname:o=>{o?delete a.value.nickname:a.value.nickname="此欄位不可為空值"},password:(o,e=1)=>{o?o.length<6?e?a.value.password="長度不足 6 個字":a.value.passwordIn="長度不足 6 個字":(delete a.value.password,delete a.value.passwordIn):e?a.value.password="此欄位不可為空值":a.value.passwordIn="此欄位不可為空值"},password2:o=>{o?o!==s.value.password?a.value.password2="密碼不一致":delete a.value.password2:a.value.password2="此欄位不可為空值"},token:(o,e=1)=>{o?(delete a.value.token,e?w("get","/users/checkout",{headers:{Authorization:s.value.token}},"驗證成功",2):w("post","/users/sign_out",{},"登出成功",2,{headers:{Authorization:s.value.token}})):a.value.token="此欄位不可為空值"}};return(o,e)=>(y(),b(T,null,[l("div",z,[e[12]||(e[12]=l("h2",null,"註冊帳號",-1)),l("form",S,[l("div",_,[e[7]||(e[7]=l("label",{for:""},"Email",-1)),u(l("input",{type:"email",placeholder:"請輸入Email","onUpdate:modelValue":e[0]||(e[0]=t=>s.value.email=t)},null,512),[[r,s.value.email]]),l("small",null,n(a.value.email),1)]),l("div",B,[e[8]||(e[8]=l("label",{for:""},"您的暱稱",-1)),u(l("input",{type:"text",placeholder:"請輸入您的暱稱","onUpdate:modelValue":e[1]||(e[1]=t=>s.value.nickname=t)},null,512),[[r,s.value.nickname]]),l("small",null,n(a.value.nickname),1)]),l("div",D,[e[9]||(e[9]=l("label",{for:""},"密碼",-1)),u(l("input",{type:"password",placeholder:"請輸入密碼","onUpdate:modelValue":e[2]||(e[2]=t=>s.value.password=t)},null,512),[[r,s.value.password]]),l("small",null,n(a.value.password),1)]),l("div",F,[e[10]||(e[10]=l("label",{for:""},"再次輸入密碼",-1)),u(l("input",{type:"password",placeholder:"請再次輸入密碼","onUpdate:modelValue":e[3]||(e[3]=t=>s.value.password2=t)},null,512),[[r,s.value.password2]]),l("small",null,n(a.value.password2),1)])]),m.value?(y(),b("div",L,"註冊回應："+n(m.value),1)):I("",!0),l("div",{class:"btn"},[l("button",{class:"black",type:"button",onClick:c},"註冊帳號"),e[11]||(e[11]=l("br",null,null,-1))])]),e[20]||(e[20]=l("hr",null,null,-1)),l("div",N,[e[16]||(e[16]=l("h2",null,"登入",-1)),l("form",O,[l("div",Z,[e[13]||(e[13]=l("label",{for:""},"Email",-1)),u(l("input",{type:"email",placeholder:"請輸入Email","onUpdate:modelValue":e[4]||(e[4]=t=>s.value.emailIn=t)},null,512),[[r,s.value.emailIn]]),l("small",null,n(a.value.emailIn),1)]),l("div",$,[e[14]||(e[14]=l("label",{for:""},"密碼",-1)),u(l("input",{type:"password",placeholder:"請輸入密碼","onUpdate:modelValue":e[5]||(e[5]=t=>s.value.passwordIn=t)},null,512),[[r,s.value.passwordIn]]),l("small",null,n(a.value.passwordIn),1)])]),f.value?(y(),b("div",j,"登入回應："+n(f.value),1)):I("",!0),l("div",{class:"btn"},[l("button",{class:"black",type:"button",onClick:V},"登入"),e[15]||(e[15]=l("br",null,null,-1))])]),e[21]||(e[21]=l("hr",null,null,-1)),l("div",M,[e[19]||(e[19]=l("h2",null,"驗證",-1)),l("form",P,[l("div",R,[e[17]||(e[17]=l("label",{for:""},"Token",-1)),u(l("input",{type:"text",placeholder:"請輸入Token","onUpdate:modelValue":e[6]||(e[6]=t=>s.value.token=t)},null,512),[[r,s.value.token]]),l("small",null,n(a.value.token),1)])]),d.value?(y(),b("div",q,"Token回應："+n(d.value),1)):I("",!0),l("div",{class:"btn"},[l("button",{class:"black",type:"button",onClick:U},"驗證"),e[18]||(e[18]=l("br",null,null,-1)),l("button",{type:"button",onClick:x},"登出")])])],64))}},W=C(H,[["__scopeId","data-v-11da78c3"]]);export{W as default};
