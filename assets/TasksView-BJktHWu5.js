import{a as g}from"./index-NIGUFBhG.js";import{c as r,o as n,d as h,a as s,t as d,f as $,F as C,_ as x,n as y,u as b,j as T,r as v,k as B,i as f,b as F,l as L,p as M}from"./index-tFy4A4Tx.js";const V={class:"img"},w=["src","title"],E={class:"txt"},I={class:"name"},N={class:"description"},j={class:"price"},D={class:"btn"},z=["onClick"],P={__name:"TaskList",props:["datas"],emits:["toCart"],setup(_,{emit:l}){const e=l,c=i=>{e("toCart",i)};return(i,u)=>(n(!0),r(C,null,h(_.datas,t=>(n(),r("li",{key:t.id},[s("div",V,[s("img",{src:t.image,alt:"data.title",title:t.title},null,8,w)]),s("ul",E,[s("li",null,[s("div",I,d(t.title),1),s("div",N,d(t.description),1)]),s("li",null,[s("div",j,"$ "+d(t.price),1),s("div",D,[s("a",{href:"#",onClick:$(m=>c(t),["prevent"])},"加入購物車",8,z)])])])]))),128))}},R={class:"name"},S={class:"number"},q={class:"price"},A={class:"btn removeBtn"},G=["onClick"],H={__name:"TaskCart",props:["Cart"],emits:["removeCart"],setup(_,{emit:l}){const e=l,c=i=>{e("removeCart",i)};return(i,u)=>(n(!0),r(C,null,h(_.Cart,t=>(n(),r("li",{key:t.id},[s("div",null,[s("div",R,d(t.title),1),s("div",S,"數量："+d(t.number),1)]),s("div",null,[s("div",q,"$ "+d((t.price*t.number).toFixed(2)),1),s("div",A,[s("a",{href:"#",onClick:$(m=>c(t),["prevent"])},"移除",8,G)])])]))),128))}},J={class:"message"},K={__name:"TaskMessage",setup(_){const l=T("msg");return(e,c)=>(n(),r("div",J,[s("ul",null,[(n(!0),r(C,null,h(b(l),(i,u)=>(n(),r("li",{key:u,class:y(i.type)},d(i.msg),3))),128))])]))}},O=x(K,[["__scopeId","data-v-dbb7174a"]]),Q={class:"productPage"},U={class:"products"},W={class:"productsList"},X={class:"Cart"},Y={class:"CartList"},Z={key:1},ss={key:0,class:"total"},as={__name:"TasksView",setup(_){const l=v([]),e=v([]),c=v([]);M("msg",c);const i=()=>{let a=0;return e.value.forEach(o=>{a+=o.price*o.number}),a.toFixed(2)},u=a=>{const o=e.value.findIndex(p=>p.id==a.id);o<0?e.value.push({...a,number:1}):e.value[o].number++,m(1)},t=a=>{const o=e.value.findIndex(p=>p.id==a.id);e.value.splice(o,1),m(0)},m=a=>{a?c.value.push({type:"add",msg:"已加入購物車"}):c.value.push({type:"remove",msg:"已刪除列表"}),setTimeout(()=>c.value.shift(),3e3)},k=async()=>{try{const{data:a}=await g("https://fakestoreapi.com/products");l.value=a}catch(a){console.log(a)}};return B(()=>k()),(a,o)=>(n(),r("div",Q,[s("div",U,[o[0]||(o[0]=s("h2",{class:"title"},"商品列表",-1)),s("ul",W,[f(P,{datas:l.value,onToCart:u},null,8,["datas"])])]),s("div",X,[o[2]||(o[2]=s("h2",{class:"title"},"購物車",-1)),s("ul",Y,[e.value.length>0?(n(),L(H,{key:0,Cart:e.value,onRemoveCart:t},null,8,["Cart"])):(n(),r("li",Z,o[1]||(o[1]=[s("div",{class:"noData"},"購物車是空的~",-1)])))]),e.value.length>0?(n(),r("div",ss,"總金額：$ "+d(i()),1)):F("",!0)]),f(O)]))}};export{as as default};
